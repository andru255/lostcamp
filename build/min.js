function t(){s.render()}function e(){}function i(){this.velocityX=0,this.velocityY=0,this.velocityZ=0,this.friction=0,this.debug=!0}var n=3,o={UP:38,DOWN:40,SPACE:32},s=new e,r=function(){window.MAIN_EL_CANVAS=new l("main",!1,"canvas").selfie,window.MAIN_CANVAS=new h(MAIN_EL_CANVAS),window.MAIN_CONTEXT=MAIN_CANVAS.getCtx(),window.MAIN_CANVAS_WIDTH=MAIN_EL_CANVAS.width,window.MAIN_CANVAS_HEIGHT=MAIN_EL_CANVAS.height,window.MAIN_CANVAS_BOUNDS={TOP:0,LEFT:0,RIGHT:MAIN_CANVAS_WIDTH,BOTTOM:MAIN_CANVAS_HEIGHT},s.init(MAIN_CONTEXT)};setTimeout(function(){r(),MAIN_CANVAS.fpf(function(e){MAIN_CANVAS.clean(),t()})},0),e.prototype.init=function(t){this.ctx=t,this.x=MAIN_CANVAS_WIDTH/2,this.y=MAIN_CANVAS_HEIGHT/2,this.v=a(this.x,this.y),this.shape=new f(this.x,this.y,this.v),this.bindEvents()};var a=function(t,e){return[{x:t-25,y:e},{x:t-25,y:e-25},{x:t,y:e-25},{x:t+25,y:e-25},{x:t+25,y:e},{x:t+25,y:e+25},{x:t,y:e+25}]};e.prototype.bindEvents=function(){var t=this,e=MAIN_EL_CANVAS.offsetLeft,i=MAIN_EL_CANVAS.offsetTop;MAIN_EL_CANVAS.addEventListener("click",function(n){t.shape.x=n.pageX-e,t.shape.y=n.pageY-i,t.shape.vertices=a(t.shape.x,t.shape.y)},!1)},e.prototype.render=function(){this.shape.draw(this.ctx)},window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,17)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout);var h=function(t){this.selfie=t};h.prototype.getCtx=function(){return this.selfie.getContext("2d")},h.prototype.clean=function(){this.getCtx().clearRect(0,0,this.selfie.width,this.selfie.height)},h.prototype.cancelAnimFrame=function(){window.cancelAnimationFrame(this.sfpf)},h.prototype.fpf=function(t){var e=this;!function i(){e.sfpf=window.requestAnimationFrame(i,e.selfie),t&&t.call(this,i)}()};var l=function(t,e,i,n){this.elementName=t,this.type=e||"#",this.tagToCreate=i||"div",this.target=n||document.body;var o=this.target.querySelector([this.tagToCreate,this.type,this.elementName].join(""));return this.selfie=!1,o&&(this.selfie=o),this._make()};l.prototype._make=function(){return this.selfie||(this.selfie=document.createElement(this.tagToCreate),this.target.appendChild(this.selfie),"."==this.type&&(this.selfie.className=this.elementName),"#"==this.type&&(this.selfie.id=this.elementName)),this},l.prototype.remove=function(){this.target.removeChild(this.selfie)},l.prototype.styles=function(t){for(var e in t)this.selfie.style[e]=t[e];return this},l.prototype.transform=function(t,e){var e=t+"("+e+")";return this.styles({webkitTransform:e,MozTransform:e,OTransform:e,transform:e}),this},l.prototype.position=function(t,e){var i=arguments[2]?0:this.selfie.width/2,n=arguments[2]?0:this.selfie.height/2;return this.styles({left:t-i+"px",top:e-n+"px"}),this.x=t,this.y=e,this},l.prototype.dimention=function(t,e){return this.styles({width:t+"px",height:e+"px"}),this.width=t,this.height=e,this},l.prototype.captureTouch=function(){var t={x:null,y:null,isPressed:!1,event:null},e=document.body.scrollLeft,i=document.documentElement.scrollLeft;document.body.scrollTop,document.documentElement.scrollTop,this.selfie.offsetLeft,this.selfie.offsetTop;return this.selfie.addEventListener("touchstart",function(e){t.isPressed=!0,t.event=e},!1),this.selfie.addEventListener("touchend",function(e){t.isPressed=!1,t.x=null,t.y=null,t.event=e},!1),this.selfie.addEventListener("touchmove",function(n){var o=n.touches[0];o.pageX||o.pageY?(o.pageX,o.pageY):(o.clientX+e+i,o.clientY),t.event=n},!1),touched},i.prototype.fillAndStroke=function(t){t.fillStyle=this.style||!1,t.fill(),this.lineWidth>0&&(t.strokeStyle=this.stroke||!1,t.lineWidth=this.lineWidth||0),t.stroke(),this.debug&&this.showDebugMode(t)},i.prototype.showDebugMode=function(t){t.beginPath(),t.save(),t.fillStyle="#00ff00",t.arc(this.x,this.y,2,0,2*Math.PI,!1),t.fill(),t.restore()};var c=function(t,e,i){this.radius=i,this.x=t,this.y=e};c.prototype=new i.prototype.constructor,c.prototype.draw=function(t){t.save(),t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),this.__proto__.fillAndStroke.call(this,t),t.closePath(),t.restore()};var f=function(t,e,i){this.x=t,this.y=e,this.vertices=i||[{x:10,y:10}]};f.prototype=new i.prototype.constructor,f.prototype.draw=function(t){t.save(),t.beginPath(),t.moveTo(this.x,this.y),this.vertices.map(function(e){t.lineTo(e.x,e.y)}),this.__proto__.fillAndStroke.call(this,t),t.closePath(),t.restore()};